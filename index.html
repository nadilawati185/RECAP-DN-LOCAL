<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Dashboard IKK - Paramitra Gunakarya</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="login" class="hidden">
        <h2>Login</h2>
        <input id="user" placeholder="User" value="IKK">
        <input id="pass" type="password" placeholder="Password" value="123">
        <button onclick="login()">Login</button>
    </div>
    
    <div id="dashboard" class="hidden">
        <header>
            <h1>Dashboard Order - IKK Track BU 17 & CMI Indah Kiat Karawang</h1>
            <button onclick="changeTheme()">Ganti Tema</button>
            <button onclick="exportData()">Export/Download</button>
        </header>
        
        <section id="orders">
            <h2>Order List</h2>
            <div id="orderListCMI">Total CMI: 0</div>
            <div id="orderListBU17">Total BU 17: 0</div>
            <input id="orderInput" placeholder="Masukkan Angka Order">
            <button onclick="addOrder()">Add Order</button>
            <button onclick="finishOrder()">Finish</button>
            <p id="dnTarget">DN Target: 0</p>
        </section>
        
        <section id="calendar">
            <h2>Kalender</h2>
            <!-- Placeholder untuk kalender (gunakan library seperti FullCalendar jika perlu) -->
            <div id="cal">Sabtu & Minggu: Merah. Order: Centang jika selesai.</div>
        </section>
        
        <section id="graphs">
            <h2>Grafik Top Customer</h2>
            <select id="graphType">
                <option value="bar">Batang</option>
                <option value="line">Garis</option>
            </select>
            <canvas id="chart"></canvas> <!-- Gunakan Chart.js untuk grafik -->
        </section>
        
        <section id="printPreview">
            <h2>Print Preview</h2>
            <button onclick="printPDF()">Print PDF</button>
            <button onclick="printJPG()">Print JPG</button>
            <!-- Tambah tombol untuk DOC, PNG, Excel, PPT -->
        </section>
    </div>
    
    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Untuk grafik -->
</body>
</html>
body {
    font-family: Arial, sans-serif;
    background-color: #f0f8ff; /* Cerah */
    color: #333;
    margin: 0;
    padding: 20px;
}
.professional { /* Tema default */
    background-color: #e6f7ff;
}
.gentleman { /* Tema alternatif */
    background-color: #fffacd;
}
.hidden { display: none; }
#dashboard { display: block; } /* Tampilkan setelah login */
let ordersCMI = [];
let ordersBU17 = [];
let theme = 'professional';

function login() {
    const user = document.getElementById('user').value;
    const pass = document.getElementById('pass').value;
    if (user === 'IKK' && pass === '123') {
        document.getElementById('login').classList.add('hidden');
        document.getElementById('dashboard').classList.remove('hidden');
        localStorage.setItem('loggedIn', 'true'); // Save otomatis
    }
}

function addOrder() {
    const input = parseInt(document.getElementById('orderInput').value);
    const target = calculateDN(input);
    document.getElementById('dnTarget').innerText = `DN Target: ${target}`;
    // Simpan ke list (pisah CMI/BU17 berdasarkan logika Anda)
    ordersCMI.push(target); // Contoh
    updateTotals();
}

function finishOrder() {
    // Otomatis hitung total setelah finish
    updateTotals();
}

function calculateDN(input) {
    if (input >= 21 && input <= 23) return 20;
    if (input >= 24 && input <= 25) return 25;
    if (input >= 26 && input <= 27) return 30;
    return input;
}

function updateTotals() {
    document.getElementById('orderListCMI').innerText = `Total CMI: ${ordersCMI.reduce((a,b)=>a+b,0)}`;
    document.getElementById('orderListBU17').innerText = `Total BU 17: ${ordersBU17.reduce((a,b)=>a+b,0)}`;
    // Update grafik (gunakan Chart.js)
    const ctx = document.getElementById('chart').getContext('2d');
    new Chart(ctx, {
        type: document.getElementById('graphType').value,
        data: { labels: ['Bulan Ini'], datasets: [{ data: [ordersCMI.length] }] }
    });
}

function changeTheme() {
    theme = theme === 'professional' ? 'gentleman' : 'professional';
    document.body.className = theme;
}

function exportData() {
    // Contoh download JSON (extend untuk PDF/Excel menggunakan library seperti jsPDF atau XLSX)
    const data = { ordersCMI, ordersBU17 };
    const blob = new Blob([JSON.stringify(data)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'orders.json';
    a.click();
}

function printPDF() {
    // Gunakan jsPDF untuk print PDF
    // Contoh: window.jsPDF().text('Dashboard', 10, 10).save('dashboard.pdf');
}

// Load jika sudah login
if (localStorage.getItem('loggedIn')) {
    document.getElementById('login').classList.add('hidden');
    document.getElementById('dashboard').classList.remove('hidden');
}